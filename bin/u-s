#!/bin/sh
set -e

init()
{
  test -n "U_S" || U_S="$(dirname "$(dirname "$(realpath "$0")")")"
  U_S_VERSION="$(cd "$U_S" && git_version)"
}

git_version()
{
  git describe --always
}

update()
{
  cd "$U_S"
  git fetch && git reset --hard origin/r0.0
}

usage()
{
  echo "Usage: u-c [update]"
  exit 1
}

main()
{
  init
  test $# -gt 0 || set -- usage
  "$@"
}

main "$@"
